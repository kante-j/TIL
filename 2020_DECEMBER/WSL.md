# WSL

2020 12 04

윈도우 컴퓨터를 쓰면서 프로그래밍이나 네트워크 어디에 접속을 하려고 했는데, linux에는 있는데 윈도우에 없는 경우가 있었다. 그래서 가상머신에 리눅스를 깔자니 너무 무거워서 WSL을 깔아서 작업을 했다. 이전에 그램을 쓸 때도 WSL을 한 번 깔아서 써봤는데, VM ware같은 가상 머신 프로그램은 어떻게 동작하는지 이해를 하고 있었지만 WSL은 어떻게 동작하는지조차 몰라서 한 번 찾아보게 되었다.

---

### 개요

> 리눅스용 윈도우 하위 시스템(Windows Subsystem for Linux) 은 윈도우10에서 Native로 리눅스 실행 파일(ELF)을 실행하기 위한 호환성 계층이다.

- 오직 64비트 윈도우10에서만 사용 가능.
- 윈도우 10 Anniversary 업데이트 이후 활성화 가능

#### 개발자 중점 목표

- grep, sed, awk 또는 다른 ELF-64 이진 파일과 같은 명령 도구 가능
- vim, emacs, tmux 사용 가능
- 자체 GNU/Linux 패키지 관리자를 사용하여 추가 소프트웨어 설치

#### 파일 시스템

- WSL 파일 시스템에 저장한다 -> 가장 빠른 성능
- Linux 파일 시스템 루트 디렉터리(`\\wsl$\Ubuntu-18.04\home\<user name>\Project`)를 사용합니다.
  - Windows 파일 시스템 루트 디렉터리(`C:\Users\<user name>\Project`)가 아니다

#### 불가능 한 것

- 컨테이너 가상화 기술은 지원 불가능.
- 커널 드라이브 및 컴파일 불가능

---

### WSL2

- 파일 시스템 성능을 높임

- 전체 시스템 호출 호환성 추가

- WSL1과의 비교

  | 기능                                      | WSL 1 | WSL 2 |
  | :---------------------------------------- | :---- | :---- |
  | Windows와 Linux 통합                      | ✅     | ✅     |
  | 빠른 부팅 시간                            | ✅     | ✅     |
  | 작은 리소스 공간                          | ✅     | ✅     |
  | 현재 버전의 VMware 및 VirtualBox에서 실행 | ✅     | ✅     |
  | 관리 VM                                   | ❌     | ✅     |
  | 전체 Linux 커널                           | ❌     | ✅     |
  | 전체 시스템 호출 호환성                   | ❌     | ✅     |
  | OS 파일 시스템 간 성능                    | ✅     | ❌     |



WSL에서 파일 작업을 실컷 하다가 그 파일이 윈도우에서 필요해서 복사가 아니라 이동을 해버렸는데, 그 다음부터 WSL이 열리지가 않았다.. 버전 1이라 그런가.. WSL2에서는 고쳐졌겠지?

---

### 참조

1. https://ko.wikipedia.org/wiki/%EB%A6%AC%EB%88%85%EC%8A%A4%EC%9A%A9_%EC%9C%88%EB%8F%84%EC%9A%B0_%ED%95%98%EC%9C%84_%EC%8B%9C%EC%8A%A4%ED%85%9C
2. https://docs.microsoft.com/ko-kr/windows/wsl/compare-versions